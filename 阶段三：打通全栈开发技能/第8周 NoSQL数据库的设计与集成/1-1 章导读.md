* **NoSQL数据库设计**
* MongoDB安装、配置、GUI工具
* Nodejs中的Mongoose库


## 章目标
* **掌握NoSQL数据库设计原则**
* 熟练Mongo安装、配置、及GUI工具的使用
* Mongoose库的集成，学会如何配置到Node项目





# 数据库
## 一、数据库分类
### 关系型
* MySQL
* Oracle
* SQL Server
* Access
* DB2，PostgreSQL

### 非关系型
* MongoDB
* Redis
* Memcached
* HBase

## 二、数据库设计
### 2.1 错误的设计
* 冗余记录
* 糟糕的索引
* 所有阈值
* 错误的命令约定
* 糟糕的文档
* 用字符来存日期

### 2.2 设计原则
### 2.3 设计工具
#### 2.3.1 在线工具
* dbdiagram.io
* Draw.io
* Lucidchart
* sqldbm.com
* QuickDBD

#### 2.3.2 客户端
* SQLGate
* DBeaver
* MySQL Workbench
* SQL Power Architect

## 三、MongoDB
### 3.1 环境
* 添加用户
* 配置权限
### 3.2 核心概念
### 3.3 基础
* 增删改查
* 统计
* 排序
* 多表联合查询

### 3.4 管理工具
* Robo ST

### 3.5 NoSQL数据库设计
#### 3.5.1 1对多的场景
##### 内嵌
1对多很少，直接内嵌
##### 子引用
1对多很多内容，反向嵌入
##### 父引用
1对多，而且需要单独进行处理的时候，使用引用

##### 反范式
###### 1:n
* 实例: 属性与名称
* 考虑读取开销

###### n:1
* 日志实例
    * IP
    * hostname
    * 区域
* 考虑更新开销

###### 场景
* 更新变的更复杂，开销更大
* 读>写
###### 优点
* 适合业务
* 某些场景效率更高

###### 缺点
* 数据冗余
* 难于更新



#### 3.5.2 双向关联
* 举例: 多人任务
* 优点
    * 添加额外的属性快速定位
    * 更方便业务组成
    * 便于统计
* 缺点:无法保证原子性

#### 3.5.3 原子性
* 冗余的字段失去原子性
* 业务独立

#### 3.5.4 原则
* 优先考虑内嵌
* 单独的对象，不应内嵌到其他对象中
* 数组不应该无限制增长
    * 考虑使用ID引用
    * 过多的引用，那就考虑是否设计合理
* 多层级的join
* 确认读写比,考虑反范式
* 考虑应用场景


### 3.6 mongoose
#### 安装
#### 使用
* 配置
* 核心Api

#### 核心概念
* Schema
    * static
    * pre
    * post
* Model
